<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.swp.mapper.BookMapper">

    <insert id="insert">
        insert into books(title,author,status,borrower,borrow_date,return_date)
        values (#{title},#{author},#{status},#{borrower},#{borrowDate},#{returnDate})
    </insert>
    <update id="update">
        update books
        <set>
            <if test="borrower !=null">borrower=#{borrower},</if>
            <if test="status!=null">status=#{status} ,</if>
            borrow_date=#{borrowDate},
            return_date=#{returnDate}
        </set>
        where id=#{id}
    </update>
    <select id="search" resultType="com.swp.entity.Book">
        select * from books
        <where>
            <if test="borrower!=null and borrower!=''">
              and  borrower like concat('%',#{borrower},'%')
            </if>
            <if test="bookName!=null and bookName!=''">
                and  title like concat('%',#{bookName},'%')
            </if>
        </where>
    </select>
</mapper>
